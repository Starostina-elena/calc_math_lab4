<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lab4 - result</title>
    <link rel="stylesheet" href="/static/main.css">
</head>
<body>
<button class="btn" onclick="location.href='/'">Назад</button>
<div>
    <h2>Наилучшая аппроксимация - {{ best_approximation }}</h2>
</div>
<div>
    <h3>Линейная аппроксимация</h3>
    <p>y = {{ lineal_a|round(3) }}x + {{ lineal_b|round(3) }}</p>
    <p>СКО: {{ lineal_s|round(3) }}</p>
    <p>Коэффициент корреляции Пирсона: {{ lineal_r|round(3) }}</p>
    <p>Коэффициент детерминации: {{ lineal_R2|round(3) }}
        {% if lineal_R2 >= 0.95 %}(высокая точность аппроксимации){% elif lineal_R2 >= 0.75 %}(удовлетворительная
            аппроксимация){% elif lineal_R2 >= 0.5 %}(слабая аппроксимация){% else %}(точность аппроксимации
            недостаточна){% endif %}</p>
    <table>
        <thead>
        <tr>
            <th>X</th>
            <th>Y</th>
            <th>φ(x)</th>
            <th>eps</th>
        </tr>
        </thead>
        {% for i in range(x|length) %}
            <tr>
                <td>{{ x[i]|round(3) }}</td>
                <td>{{ y[i]|round(3) }}</td>
                <td>{{ lineal_f[i]|round(3) }}</td>
                <td>{{ lineal_eps[i]|round(3) }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<div>
    <h3>Полином 2-ой степени</h3>
    <p>y = {{ pol2_a|round(3) }} + {{ pol2_b|round(3) }}x + {{ pol2_c|round(3) }}x^2</p>
    <p>СКО: {{ pol2_s|round(3) }}</p>
    <p>Коэффициент детерминации: {{ pol2_R2|round(3) }}
        {% if pol2_R2 >= 0.95 %}(высокая точность аппроксимации){% elif pol2_R2 >= 0.75 %}(удовлетворительная
            аппроксимация){% elif pol2_R2 >= 0.5 %}(слабая аппроксимация){% else %}(точность аппроксимации
            недостаточна){% endif %}</p>
    <table>
        <thead>
        <tr>
            <th>X</th>
            <th>Y</th>
            <th>φ(x)</th>
            <th>eps</th>
        </tr>
        </thead>
        {% for i in range(x|length) %}
            <tr>
                <td>{{ x[i]|round(3) }}</td>
                <td>{{ y[i]|round(3) }}</td>
                <td>{{ pol2_f[i]|round(3) }}</td>
                <td>{{ pol2_eps[i]|round(3) }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<div>
    <h3>Полином 3-ой степени</h3>
    <p>y = {{ pol3_a|round(3) }} + {{ pol3_b|round(3) }}x + {{ pol3_c|round(3) }}x^2 + {{ pol3_d|round(3) }}x^3</p>
    <p>СКО: {{ pol3_s|round(3) }}</p>
    <p>Коэффициент детерминации: {{ pol3_R2|round(3) }}
        {% if pol3_R2 >= 0.95 %}(высокая точность аппроксимации){% elif pol3_R2 >= 0.75 %}(удовлетворительная
            аппроксимация){% elif pol3_R2 >= 0.5 %}(слабая аппроксимация){% else %}(точность аппроксимации
            недостаточна){% endif %}</p>
    <table>
        <thead>
        <tr>
            <th>X</th>
            <th>Y</th>
            <th>φ(x)</th>
            <th>eps</th>
        </tr>
        </thead>
        {% for i in range(x|length) %}
            <tr>
                <td>{{ x[i]|round(3) }}</td>
                <td>{{ y[i]|round(3) }}</td>
                <td>{{ pol3_f[i]|round(3) }}</td>
                <td>{{ pol3_eps[i]|round(3) }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<div>
    <h3>Экспоненциальная</h3>
    <p>y = {{ exp_a|round(3) }} * exp({{ exp_b|round(3) }}x)</p>
    <p>СКО: {{ exp_s|round(3) }}</p>
    <p>Коэффициент детерминации: {{ exp_R2|round(3) }}
        {% if exp_R2 >= 0.95 %}(высокая точность аппроксимации){% elif exp_R2 >= 0.75 %}(удовлетворительная
            аппроксимация){% elif exp_R2 >= 0.5 %}(слабая аппроксимация){% else %}(точность аппроксимации
            недостаточна){% endif %}</p>
    <table>
        <thead>
        <tr>
            <th>X</th>
            <th>Y</th>
            <th>φ(x)</th>
            <th>eps</th>
        </tr>
        </thead>
        {% for i in range(x|length) %}
            <tr>
                <td>{{ x[i]|round(3) }}</td>
                <td>{{ y[i]|round(3) }}</td>
                <td>{{ exp_f[i]|round(3) }}</td>
                <td>{{ exp_eps[i]|round(3) }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<div>
    <h3>Логарифмическая</h3>
    <p>y = {{ log_a|round(3) }} * ln(x) + {{ log_b|round(3) }}</p>
    <p>СКО: {{ log_s|round(3) }}</p>
    <p>Коэффициент детерминации: {{ log_R2|round(3) }}
        {% if log_R2 >= 0.95 %}(высокая точность аппроксимации){% elif log_R2 >= 0.75 %}(удовлетворительная
            аппроксимация){% elif log_R2 >= 0.5 %}(слабая аппроксимация){% else %}(точность аппроксимации
            недостаточна){% endif %}</p>
    <table>
        <thead>
        <tr>
            <th>X</th>
            <th>Y</th>
            <th>φ(x)</th>
            <th>eps</th>
        </tr>
        </thead>
        {% for i in range(x|length) %}
            <tr>
                <td>{{ x[i]|round(3) }}</td>
                <td>{{ y[i]|round(3) }}</td>
                <td>{{ log_f[i]|round(3) }}</td>
                <td>{{ log_eps[i]|round(3) }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<div>
    <h3>Степенная</h3>
    <p>y = {{ pow_a|round(3) }} * x^{{ pow_b|round(3) }}</p>
    <p>СКО: {{ pow_s|round(3) }}</p>
    <p>Коэффициент детерминации: {{ pow_R2|round(3) }}
        {% if pow_R2 >= 0.95 %}(высокая точность аппроксимации){% elif pow_R2 >= 0.75 %}(удовлетворительная
            аппроксимация){% elif pow_R2 >= 0.5 %}(слабая аппроксимация){% else %}(точность аппроксимации
            недостаточна){% endif %}</p>
    <table>
        <thead>
        <tr>
            <th>X</th>
            <th>Y</th>
            <th>φ(x)</th>
            <th>eps</th>
        </tr>
        </thead>
        {% for i in range(x|length) %}
            <tr>
                <td>{{ x[i]|round(3) }}</td>
                <td>{{ y[i]|round(3) }}</td>
                <td>{{ pow_f[i]|round(3) }}</td>
                <td>{{ pow_eps[i]|round(3) }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<div id="calculator" style="width: 600px; height: 600px;"></div>
<form method="post" action="{{ url_for('download_report') }}">
    <input type="hidden" name="report_text" value="{% include 'report.html' %}">
    <div class="form-block">
        <button type="submit" class="btn">Скачать отчет</button>
    </div>
</form>
<script src="https://www.desmos.com/api/v1.10/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
<script>
    var elt = document.getElementById('calculator');
    var calculator = Desmos.GraphingCalculator(elt);
    calculator.updateSettings({
        keypad: false,
        expressions: true,
        expressionsCollapsed: true
    });
    window.onload = function () {
        calculator.setExpression({id: 'lineal', latex: 'y={{ lineal_a|round(3) }}x + {{ lineal_b|round(3) }}'});
        calculator.setExpression({
            id: 'polinom2',
            latex: 'y = {{ pol2_a|round(3) }} + {{ pol2_b|round(3) }}x + {{ pol2_c|round(3) }}x^2'
        });
        calculator.setExpression({
            id: 'polinom3',
            latex: 'y = {{ pol3_a|round(3) }} + {{ pol3_b|round(3) }}x + {{ pol3_c|round(3) }}x^2 + {{ pol3_d|round(3) }}x^3'
        });
        calculator.setExpression({id: 'exponential', latex: 'y = {{ exp_a|round(3) }} \\exp({{ exp_b|round(3) }}x)'});
        calculator.setExpression({id: 'logarithmic', latex: 'y = {{ log_a|round(3) }} \\ln(x) + {{ log_b|round(3) }}'});
        calculator.setExpression({
            id: 'poweric',
            latex: 'y = {{ pow_a|round(3) }} x^{{ '{' }} {{ pow_b|round(3) }} {{ '}' }}'
        });
        calculator.setExpression({
            id: 'points',
            type: 'table',
            columns: [
                {latex: 'x', values: {{ x|tojson }}},
                {latex: 'y', values: {{ y|tojson }}}
            ]
        });
        calculator.setMathBounds({
            left: {{ desmos_left_view }},
            right: {{ desmos_right_view }},
            bottom: {{ desmos_down_view }},
            top: {{ desmos_up_view }}
        });
    }
</script>
</body>
</html>